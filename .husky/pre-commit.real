#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run formatting on all workspaces
pnpm format:fix

# Check if formatting modified any files
# This will catch both staged and unstaged changes
if [ -n "$(git status --porcelain)" ]; then
  echo "⚠️  Code formatting was applied. Please review the changes and commit again."
  echo "   The formatted files have been automatically staged."
  # Stage all formatted files
  git add -A
  exit 1
fi
